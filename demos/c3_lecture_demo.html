<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-02-04">

<title>Class 3 Lecture Demonstration Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="c3_lecture_demo_files/libs/clipboard/clipboard.min.js"></script>
<script src="c3_lecture_demo_files/libs/quarto-html/quarto.js"></script>
<script src="c3_lecture_demo_files/libs/quarto-html/popper.min.js"></script>
<script src="c3_lecture_demo_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="c3_lecture_demo_files/libs/quarto-html/anchor.min.js"></script>
<link href="c3_lecture_demo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="c3_lecture_demo_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="c3_lecture_demo_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="c3_lecture_demo_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="c3_lecture_demo_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="c3_lecture_demo_files/styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#bivariate-mapping-techniques-in-arcgis" id="toc-bivariate-mapping-techniques-in-arcgis" class="nav-link active" data-scroll-target="#bivariate-mapping-techniques-in-arcgis">Bivariate Mapping Techniques in ArcGIS</a></li>
  <li><a href="#preamble" id="toc-preamble" class="nav-link" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#part-i" id="toc-part-i" class="nav-link" data-scroll-target="#part-i">Part I:</a></li>
  <li><a href="#part-ii" id="toc-part-ii" class="nav-link" data-scroll-target="#part-ii">Part II:</a></li>
  <li><a href="#part-iii" id="toc-part-iii" class="nav-link" data-scroll-target="#part-iii">Part III:</a></li>
  <li><a href="#part-iv" id="toc-part-iv" class="nav-link" data-scroll-target="#part-iv">Part IV:</a></li>
  <li><a href="#part-v" id="toc-part-v" class="nav-link" data-scroll-target="#part-v">Part V:</a></li>
  <li><a href="#part-vi" id="toc-part-vi" class="nav-link" data-scroll-target="#part-vi">Part VI:</a></li>
  <li><a href="#concluding-remarks" id="toc-concluding-remarks" class="nav-link" data-scroll-target="#concluding-remarks">Concluding Remarks</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Class 3 Lecture Demonstration Lab</h1>
<p class="subtitle lead">Spring 2024 | <a href="https://courses.newschool.edu/courses/UENV3200/">UENV3200</a>, <a href="https://courses.newschool.edu/courses/UURB3210/">UURB3210</a></p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 4, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="bivariate-mapping-techniques-in-arcgis" class="level2">
<h2 class="anchored" data-anchor-id="bivariate-mapping-techniques-in-arcgis">Bivariate Mapping Techniques in ArcGIS</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/Minard-carte-viande-1858.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Multivariable Mapping</figcaption><p></p>
</figure>
</div>
<p><a href="https://en.wikipedia.org/wiki/Multivariate_map#/media/File:Minard-carte-viande-1858.png">An 1858 multivariate map by Charles Joseph Minard</a>, using a nominal choropleth to represent departments that supplied meat to be consumed in Paris, proportional circles to represent significant volumes of that meat, combined with pie charts dividing it into relative proportions of beef (black), veal (red), and mutton (green).</p>
</section>
<section id="preamble" class="level2">
<h2 class="anchored" data-anchor-id="preamble">Preamble</h2>
<p>This week’s assignment will feature a relatively complex ‘multivariable’ map for points features. In this type of mapping, multiple variables are shown in one map or in one map feature. In this demonstration lab, we will explore general symbology options for both points and polygons; Dot Density mapping - a form of multivariable mapping; and categories, quantities and charts.</p>
<p><strong>First</strong>, we will create a proportional symbol for a <em>Quantitative Value</em>.</p>
<p><strong>Second</strong>, we will explore charting options for <em>Quantitative Values</em>.</p>
<p><strong>Third</strong>, we will use US Counties to map to a <em>Categorical Value</em>.</p>
<p><strong>Fourth</strong>, we will explore how ArcGIS handles a common thematic quantitative mapping technique known as <em>Dot Density Mapping</em>.</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<ul>
<li><a href="https://www.dropbox.com/s/mcap1gyx7yn4h3g/c3.lab3.zip?dl=1">Class 3 Lab 3 Data</a></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Lab 3 Data</figcaption><p></p>
</figure>
</div>
<ul>
<li><p><code>Lower_48</code> = Polygon feature for US counties in Lower 48.</p></li>
<li><p><code>county_2020_pre_pivot.dbf</code> = Pre-processed ‘long’ dataset</p></li>
<li><p><code>county_2020_post_pivot.dbf</code> = Post-processed ‘wide’ dataset</p></li>
<li><p>The polygon features come from the US Census for US County boundaries, Located <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html">HERE</a>.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">US Census County Boundaries at 5m scale</figcaption><p></p>
</figure>
</div>
<ul>
<li>The election tabular data comes from the <a href="https://electionlab.mit.edu/data">MIT Election Lab</a> hosted at <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/VOQCHQ">Harvard Dataverse</a></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">MIT Election Data for Presidential Election, Counties, 2020</figcaption><p></p>
</figure>
</div>
<ul>
<li>To understand the process to <code>pivot</code> tabular data, more information <a href="https://www.esri.com/arcgis-blog/products/arcgis-pro/data-management/pivot-rows-of-long-tabular-data-to-columns-for-joining-to-features/">HERE</a></li>
</ul>
</section>
<section id="part-i" class="level2">
<h2 class="anchored" data-anchor-id="part-i">Part I:</h2>
<ul>
<li><p>Open ArcGIS and point <em>ArcCatalog</em> to the <code>c3lab3</code> lab data. Remember to uncompress (unzip) the data directory before proceeding. Save the connected <code>.mxd</code> as <code>lab3.mxd</code></p></li>
<li><p>Next, open the - <code>county_2020_pre_pivot.dbf</code>. We will discuss ‘long’ data before proceeding to <code>county_2020_post_pivot.dbf</code> to discuss ‘wide’ data:</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Summed values for election results per US Counties (GEOID)</figcaption><p></p>
</figure>
</div>
</section>
<section id="part-ii" class="level2">
<h2 class="anchored" data-anchor-id="part-ii">Part II:</h2>
<p>From the polygon feature <code>Lower_48.shp</code> we will initiate a table join on the <code>GEOID</code> column in both the polygon feature and in the <code>county_2020_post_pivot.dbf</code> table:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/5.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Initiate Join - Toggle ON <code>keep only matching records</code></figcaption><p></p>
</figure>
</div>
<p>Once joined, its good practice to export the join to the <code>Default.gdb</code>.</p>
<p>Next, notice that the feature polygon is in coordinate system <code>WGS84</code> which is not ideal for areal representation. A much better approach is to use a <em>Conic</em> map projection designed for the United States. We will search under <code>Albers</code>, choosing <code>NAD 1983 (2011) Contguous USA Albers</code>, applying this map coordinate system to the Data Frame. This is a good time to also save the <code>.mxd</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/6.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>NAD 1983 (2011) Contguous USA Albers</code></figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/7.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>NAD 1983 (2011) Contguous USA Albers</code> Result</figcaption><p></p>
</figure>
</div>
</section>
<section id="part-iii" class="level2">
<h2 class="anchored" data-anchor-id="part-iii">Part III:</h2>
<p>Before symbolization, We will transform the Polygon features to a points representation. In class 4 we will apply methods for polygon features; however, for class 3 we will stick with points features generally.</p>
<p>Utilize the <code>Feature to Point</code> tool and export the result to the <code>Default.gdb</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/8.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>Feature to Point</code></figcaption><p></p>
</figure>
</div>
<p>Next, we will apply a proportional symbolization to the points utilizing the <code>Graduated symbols</code> function under the <code>Quantities</code> tab. All this work will be done at the layer level within <code>Symbology</code>.</p>
<p>Choose <code>SUM_totalv</code> as the input value; accept the defaults which we will discuss together:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/9.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Applying Proportional Symbolization to Points Features</figcaption><p></p>
</figure>
</div>
<p>Review the results:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/10.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Applying Proportional Symbolization to Points Features - Results</figcaption><p></p>
</figure>
</div>
</section>
<section id="part-iv" class="level2">
<h2 class="anchored" data-anchor-id="part-iv">Part IV:</h2>
<p>Next we will apply a <code>Charts</code> function using the <code>Pie</code> option. The input for this symbolization will be <code>Sum_DEMOCR</code> and <code>Sum_REPUBL</code>, colorized to represent these two political parties.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/11.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Applying Charts Symbolization to Points Feature</figcaption><p></p>
</figure>
</div>
<p>Review the results:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/12.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Applying Charts Symbolization to Points Feature - Results</figcaption><p></p>
</figure>
</div>
</section>
<section id="part-v" class="level2">
<h2 class="anchored" data-anchor-id="part-v">Part V:</h2>
<p>The next symbolization will feature <em>Categorical</em> values based on a percentage of vote type per county. If a county has &gt;50% Republican votes, that will be considered a majority Republican voting county. We will assume its opposite - &lt;50% Republican votes - can be generalized as Other.</p>
<p>To start, we will create a new column <code>VOTE_DIR</code> standing for ‘vote direction’ and make this a <code>Double</code> type column. Will will apply the following formula to the new column:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/13.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Create New Column <code>VOTE_DIR</code></figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/14.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply formula to derive % Republican Votes Per County</figcaption><p></p>
</figure>
</div>
<p>With the % Republican Votes Per County, we can apply a filter to the condition <code>&gt;50%</code> and give this a categorical (nominal) value of “republican”. First we create a column <code>VOTE_TYPE</code> as Text:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/15.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Make column to derive % Republican Votes Per County</figcaption><p></p>
</figure>
</div>
<p>Then we apply the condition formula within the <em>Field Calculator</em>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/16.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply formula to derive % Republican Votes Per County</figcaption><p></p>
</figure>
</div>
<p>Next, we will utilize <code>Select by Attributes</code> to select the <code>&gt;50%</code> condition to the column <code>VOTE_DIR</code>; this will select a number of records that we then apply a new text element “republican” in the column <code>VOTE_TYPE</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/18.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply formula to derive % Republican Votes Per County</figcaption><p></p>
</figure>
</div>
<p>Next, we <code>Switch Selection</code> and apply a new text element “other” in the column <code>VOTE_TYPE</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/switch.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Switch the Selection and apply “other” with the Field Calculator</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/19.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply formula to derive % Republican Votes Per County</figcaption><p></p>
</figure>
</div>
</section>
<section id="part-vi" class="level2">
<h2 class="anchored" data-anchor-id="part-vi">Part VI:</h2>
<p>In this final section, we will revert back to the polygon feature and put aside the points feature that we have been utilzing up to this section.</p>
<p>First, open the attribute table for the <code>Lower_48.shp</code> - importantly - with the joined data that was solidified into the <code>Default.gdb</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/20.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply <code>Dot Density</code> Quantities Method</figcaption><p></p>
</figure>
</div>
<p>First, we will point the <code>Dot Size</code> to <code>5</code> with each dot representing <code>1000</code> votes of either democrat or republican TYPE. This works decently at a small scale.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/21.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply <code>Dot Density</code> Quantities Method - Result</figcaption><p></p>
</figure>
</div>
<p>Next, we will point the <code>Dot Size</code> to <code>2</code> with each dot representing <code>5000</code> votes of either democrat or republican TYPE. This works decently at a larger scale.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c3_lecture_demo_files/img/22.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Apply <code>Dot Density</code> Quantities Method - Result</figcaption><p></p>
</figure>
</div>
</section>
<section id="concluding-remarks" class="level2">
<h2 class="anchored" data-anchor-id="concluding-remarks">Concluding Remarks</h2>
<p>In this first thematic mapping lab, we covered several methods that are common to show multiple dimensions of a dataset with efficiency and map legibility. In the <a href="https://gis-nspe-tns.github.io/STGIS_UENV3200_UURB3210_sp24/labs/STGIS_lab-3_SP24.html">assignment 3 technical lab</a>, we will dive deeper into bivariate mapping with a points feature, producing a relatively complex yet legible thematic map.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/^(?:http:|https:)\/\/www\.quarto\.org\/custom/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->



<script src="c3_lecture_demo_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>