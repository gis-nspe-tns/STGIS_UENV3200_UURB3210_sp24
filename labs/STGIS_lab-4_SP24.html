<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-02-10">

<title>Class 4 Lab: Choropleth Mapping, Thematic Map Design, Part II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="STGIS_lab-4_SP24_files/libs/clipboard/clipboard.min.js"></script>
<script src="STGIS_lab-4_SP24_files/libs/quarto-html/quarto.js"></script>
<script src="STGIS_lab-4_SP24_files/libs/quarto-html/popper.min.js"></script>
<script src="STGIS_lab-4_SP24_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="STGIS_lab-4_SP24_files/libs/quarto-html/anchor.min.js"></script>
<link href="STGIS_lab-4_SP24_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="STGIS_lab-4_SP24_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="STGIS_lab-4_SP24_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="STGIS_lab-4_SP24_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="STGIS_lab-4_SP24_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="STGIS_lab-4_SP24_files/styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#step-1" id="toc-step-1" class="nav-link" data-scroll-target="#step-1">Step 1</a></li>
  <li><a href="#step-2" id="toc-step-2" class="nav-link" data-scroll-target="#step-2">Step 2</a></li>
  <li><a href="#step-4" id="toc-step-4" class="nav-link" data-scroll-target="#step-4">Step 4</a></li>
  <li><a href="#step-4-1" id="toc-step-4-1" class="nav-link" data-scroll-target="#step-4-1">Step 4</a></li>
  <li><a href="#step-5" id="toc-step-5" class="nav-link" data-scroll-target="#step-5">Step 5</a></li>
  <li><a href="#step-6" id="toc-step-6" class="nav-link" data-scroll-target="#step-6">Step 6</a></li>
  <li><a href="#step-7" id="toc-step-7" class="nav-link" data-scroll-target="#step-7">Step 7</a></li>
  <li><a href="#step-8" id="toc-step-8" class="nav-link" data-scroll-target="#step-8">Step 8</a></li>
  <li><a href="#step-9" id="toc-step-9" class="nav-link" data-scroll-target="#step-9">Step 9</a></li>
  <li><a href="#concluding-remarks" id="toc-concluding-remarks" class="nav-link" data-scroll-target="#concluding-remarks">Concluding Remarks</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Class 4 Lab: Choropleth Mapping, Thematic Map Design, Part II</h1>
<p class="subtitle lead">Spring 2024 | <a href="https://courses.newschool.edu/courses/UENV3200/">UENV3200</a>, <a href="https://courses.newschool.edu/courses/UURB3210/">UURB3210</a></p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 10, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="preamble" class="level2">
<h2 class="anchored" data-anchor-id="preamble">Preamble</h2>
<p>In this fourth technical lab, we will complete any remaining steps of Monday’s demonstration lab then turn to steps necessary for the fourth assignment. These lab steps should be used extensively to aid with the completion of the fourth assignment due Sunday evening at 11:59pm.</p>
<ul>
<li><a href="https://gis-nspe-tns.github.io/STGIS_UENV3200_UURB3210_sp24/demos/c4_lecture_demo.html">Class 4 Demonstration Lab</a></li>
<li><a href="https://gis-nspe-tns.github.io/STGIS_UENV3200_UURB3210_sp24/assignments/STGIS_assignment-4_SP24.html">Class 4 Assignment</a></li>
</ul>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>The US Census product that will be utilized in both the lab and assignment is the 2020 5 year summary in Geodatabase Format:</p>
<p><a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-data.html">LINK to US Census TIGER Geodatabase</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/top.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">US Census TIGER Geodatabase</figcaption><p></p>
</figure>
</div>
<p>The data for this lab comes from the <a href="https://gis-nspe-tns.github.io/STGIS_UENV3200_UURB3210_sp24/assignments/STGIS_assignment-4_SP24.html">Class 4 Assignment</a>.</p>
<p>We will be utilzing the <code>.gdb</code> option for the 2016-2022 American Community Survey US Census product.</p>
<p>The geographic unit will be US Counties for the lab steps. As discussed in the assignment, you may decide to choose another geographic unit such as Census Tract or Census Block Groups.</p>
<p><a href="https://www.dropbox.com/s/exsdenrnke0ht6c/ACS_2020_5YR_COUNTY.gdb.zip?dl=1">Backup Direct link to lab US Counties</a></p>
<p>Once the download is complete, place the <code>.zip</code> into a directory you make entitled <code>c4lab4</code>. Make sure to fully unzip the data folder.</p>
<p>Connect a new <code>.mxd</code> via ArcCatalog to the new <code>c4lab4</code> directory and save that new <code>.mxd</code> as <code>c4lab.mxd</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Class 4 US Counties Census <code>.gdb</code></figcaption><p></p>
</figure>
</div>
</section>
<section id="step-1" class="level2">
<h2 class="anchored" data-anchor-id="step-1">Step 1</h2>
<ul>
<li><p>Make sure to connect the <code>c4lab.mxd</code> to the <a href="https://www.dropbox.com/s/exsdenrnke0ht6c/ACS_2020_5YR_COUNTY.gdb.zip?dl=1">Class 4 Starter Data</a> as downloaded and uncompressed.</p></li>
<li><p>For demonstration purposes, the assignment guide and the technical lab will utilize US Census Counties as the geographic unit of analysis.</p></li>
</ul>
</section>
<section id="step-2" class="level2">
<h2 class="anchored" data-anchor-id="step-2">Step 2</h2>
<ul>
<li>Next, import the geometry + tabular data as follows:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Loading Geometry + Tabular data</figcaption><p></p>
</figure>
</div>
</section>
<section id="step-4" class="level2">
<h2 class="anchored" data-anchor-id="step-4">Step 4</h2>
<ul>
<li>Next, join the tabular to the geometry and export the successful join to the <code>Default.gdb</code>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Table Join for <code>X01_AGE_AND_Sex</code></figcaption><p></p>
</figure>
</div>
</section>
<section id="step-4-1" class="level2">
<h2 class="anchored" data-anchor-id="step-4-1">Step 4</h2>
<ul>
<li>Once joined, transform the <em>Data Frame</em> to <code>NAD 1983 (2011) Contiguous USA Albers</code> coordinate system:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Choose an equal area map projection for the <em>Data Frame</em></figcaption><p></p>
</figure>
</div>
</section>
<section id="step-5" class="level2">
<h2 class="anchored" data-anchor-id="step-5">Step 5</h2>
<ul>
<li>Next we will review the <code>X01_AGE_AND_Sex</code> tabular data. Notice the field naming convention - how the US Census designates both variable name and concept (theme):</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/5.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><code>B01001e1</code> = Total Population for the Sex Male/Female Concept</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/7.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Census API listing for Total Population variable</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/9.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Census API listing Total Male variable</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/8.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Census API listing for Total Female variable</figcaption><p></p>
</figure>
</div>
<p>For the assignment, you will need to research your variable themes and positions within the datatables. To do this, refer to the following:</p>
<ul>
<li><a href="https://api.census.gov/data/2020/acs/acs5/variables.html">Census API for 2020 ACS 5 year product</a></li>
</ul>
</section>
<section id="step-6" class="level2">
<h2 class="anchored" data-anchor-id="step-6">Step 6</h2>
<p>Typically, US Census data is mapped through a normalization process where the total population stands as the denominator, and the theme subset population is the nominator. For demonstration purposes, we will determine the <em>Percentage of Males</em> per US Counties. The formula for this determination is as follows:</p>
<p><span class="math display">\[
(B01001e2/B01001e1)*100
\]</span></p>
<p><code>(B01001e2/B01001e1)*100</code></p>
</section>
<section id="step-7" class="level2">
<h2 class="anchored" data-anchor-id="step-7">Step 7</h2>
<p>Next, we will utilize the <em>Delete Field</em> tool to remove all columns that will not be part of our mapping. This step should be done slowly and with deliberation to ensure that only unneeded concept variables are removed.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/10.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Delete fields that will not be used to tailor and compress size of the tabular data</figcaption><p></p>
</figure>
</div>
</section>
<section id="step-8" class="level2">
<h2 class="anchored" data-anchor-id="step-8">Step 8</h2>
<p>Next, we will create a new <code>Double</code> column titled <code>pct_male</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/11.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Delete fields that will not be used to tailor and compress size of the tabular data</figcaption><p></p>
</figure>
</div>
<p>Next, we will populate the <code>pct_male</code> column with the normalization formula as follows:</p>
<ul>
<li><code>[B01001e2]/ [B01001e1]*100</code></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/12.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Normalize the Male population by the Total population</figcaption><p></p>
</figure>
</div>
<p>Next, we will use the <em>Geospatial Analyst</em> extension to review the histogram of the <code>pct_male</code> variable:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/14.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Histogram for <code>pct_male</code> variable</figcaption><p></p>
</figure>
</div>
</section>
<section id="step-9" class="level2">
<h2 class="anchored" data-anchor-id="step-9">Step 9</h2>
<p>In the final step, we will classify the <code>pct_male</code> variable via <em>Equal Interval</em>, <em>Quantile</em>, <em>Natural Breaks</em> and <em>Standard Deviation</em>. We will then conclude with <em>Manual</em> techniques. The following images show each of these classification methods for the <code>pct_male</code> variable using <em>5 Standard Classes</em>:</p>
<p>With the <em>Quantile</em> Classification the total feature count is divided by the number of classes, five in our case. This results in the count of features per class from the lowest value to the highest value.</p>
<p><span class="math display">\[
3221/5 = 644.2
\]</span> <img src="STGIS_lab-4_SP24_files/img/15.png" class="img-fluid" alt="Quantile Classification for pct_male variable"></p>
<p>With the <em>Equal Interval</em> Classification the range of values of the variable are separated into equal range classes. For our variable <code>pct_male</code> the low value is <code>41.986</code> and the high value is <code>70.94</code>.</p>
<p><span class="math display">\[
70.94 - 41.986 = 28.954
\]</span></p>
<p><span class="math display">\[
28.954/5 = 5.7908
\]</span></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/16.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Equal Interval Classification for <code>pct_male</code> variable</figcaption><p></p>
</figure>
</div>
<p>With the <em>Natural Breaks</em> Classification an algorithm is applied to the variable, creating separate classes that minimize the average deviation from the class mean while maximizing the deviation from the means of the other groups. In other words, the variable range is <em>separated</em> into the most <em>natural</em> classes.</p>
<p>If you want to know how <em>Natural Breaks</em> works, this is a good summary:</p>
<p><em>The method requires an iterative process. That is, calculations must be repeated using different breaks in the dataset to determine which set of breaks has the smallest in-class variance. The process is started by dividing the ordered data into groups. Initial group divisions can be arbitrary. There are four steps that must be repeated:</em></p>
<ul>
<li>Calculate the sum of squared deviations between classes (SDBC).</li>
<li>Calculate the sum of squared deviations from the array mean (SDAM).</li>
<li>Subtract the SDBC from the SDAM (SDAM-SDBC). This equals the sum of the squared deviations from the class means.</li>
<li>After inspecting each of the SDBC, a decision is made to move one unit from the class with the largest SDBC toward the - class with the lowest SDBC.</li>
</ul>
<p><a href="http://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization">Source</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/20.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Natural Breaks Classification for <code>pct_male</code> variable</figcaption><p></p>
</figure>
</div>
<p>The <em>Standard Deviation</em> Classification is used to determine each polygon value variation from the <code>mean</code> value of the variable range. By emphasizing values above and below the mean, standard deviation classification helps show which polygons are above or below an average value. Use this classification method when it is important to know how values relate to the mean. For greater detail in your map, you can change the class size from 1 standard deviation to 0.5 standard deviation.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/18.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Standard Deviation</em> Classification for <code>pct_male</code> variable</figcaption><p></p>
</figure>
</div>
<p>The <em>Manual Breaks</em> Classification option is used if you want to define your own classes. Alternatively, you can start with one of the standard classifications and make adjustments as needed. As an example of <em>Manual Breaks</em>, you might want just two classes; one above a certain value, and one below the certain value for a boolean result.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="STGIS_lab-4_SP24_files/img/19.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Manual Method</em> for <code>pct_male</code> variable</figcaption><p></p>
</figure>
</div>
</section>
<section id="concluding-remarks" class="level2">
<h2 class="anchored" data-anchor-id="concluding-remarks">Concluding Remarks</h2>
<p>In this tutorial lab for the <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-data.html">US Census Data</a>, we covered all the steps needed to access and then map via various classification methods typical census variables. For the <a href="https://gis-nspe-tns.github.io/STGIS_UENV3200_UURB3210_sp24/assignments/STGIS_assignment-4_SP24.html">Class 4 Assignment</a>, you will explore the various census variables available in the American Community Survey product, and choose both a geography unit and a variable theme in order to create your choropleth deliverable.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/^(?:http:|https:)\/\/www\.quarto\.org\/custom/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->



<script src="STGIS_lab-4_SP24_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>